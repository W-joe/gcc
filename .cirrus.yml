environment:
        CIRRUS_CLONE_DEPTH: 1

container:
        dockerfile: Dockerfile
        # 2 CPU/4GB RAM by default
        # community cluster limits:
        # CPUs: 8
        # RAM: 24 GB
        cpu: 4
        memory: 8G

env_task:
        env_script: env
        pwd_script: pwd
        ls_script: ls -l

gdc_task:
        clone_script: git clone --branch=master-ci --depth=1 https://github.com/W-joe/gcc /tmp/cirrus-ci-build
        pwd_script: pwd
        ls_script: ls -l
        setup_script: ./buildci.sh setup
        build_script: ./buildci.sh build
        test_script: ./buildci.sh testsuite


unittest_task:
        clone_script: git clone --branch=master-ci --depth=1 https://github.com/W-joe/gcc /tmp/cirrus-ci-build
        setup_script: ./buildci.sh setup
        build_script: ./buildci.sh build
        test_script: ./buildci.sh unittests


